#include <stdio.h>
#include <stdint.h>
#include <string.h>

char maze[18][18] = {{3, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 9}, {5, 3, 8, 1, 3, 10, 11, 10, 11, 11, 11, 9, 3, 10, 11, 10, 9, 5}, {5, 7, 10, 15, 14, 8, 6, 8, 5, 4, 4, 6, 15, 8, 4, 2, 12, 5}, {5, 5, 3, 14, 9, 2, 10, 10, 15, 10, 11, 8, 7, 11, 11, 10, 8, 5}, {5, 4, 7, 9, 7, 11, 11, 8, 4, 3, 15, 8, 5, 5, 7, 11, 8, 5}, {5, 3, 13, 4, 5, 5, 7, 8, 2, 13, 6, 9, 5, 4, 5, 4, 1, 5}, {5, 5, 4, 1, 4, 5, 6, 8, 2, 15, 9, 4, 4, 2, 15, 8, 5, 5}, {5, 5, 1, 7, 8, 6, 10, 9, 1, 4, 7, 11, 10, 8, 6, 10, 13, 5}, {5, 7, 15, 13, 2, 9, 1, 6, 13, 2, 13, 6, 9, 2, 11, 11, 12, 5}, {5, 5, 5, 7, 11, 14, 12, 1, 7, 9, 5, 1, 6, 9, 4, 4, 1, 5}, {5, 5, 4, 4, 5, 1, 3, 12, 4, 4, 4, 7, 8, 6, 11, 11, 13, 5}, {5, 6, 11, 8, 7, 15, 15, 10, 11, 10, 11, 14, 11, 9, 5, 5, 5, 5}, {5, 2, 15, 8, 5, 4, 7, 9, 5, 2, 14, 9, 5, 4, 4, 5, 5, 5}, {5, 3, 15, 9, 7, 8, 4, 4, 6, 9, 2, 12, 6, 9, 3, 13, 23, 5}, {5, 5, 5, 4, 6, 11, 10, 8, 1, 7, 10, 8, 1, 4, 4, 5, 5, 5}, {5, 4, 7, 11, 8, 7, 10, 11, 13, 6, 11, 10, 15, 9, 1, 4, 5, 5}, {5, 2, 12, 4, 2, 12, 2, 12, 4, 2, 14, 8, 4, 6, 14, 8, 4, 5}, {6, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 12}};
// void __attribute__ ((constructor)) test_constructor() {
//     return;
// }

uint8_t check(char s[]) {
    if (memcmp(s, "hsctf{", 6) || s[37] != '}') {
        return 0;
    }
    int8_t dirs[4][2] = {{0, -1}, {-1, 0}, {0, 1}, {1, 0}};
    int8_t x = 1, y = 1;
    uint8_t tmp;
    for (uint8_t i = 6; i < 37; i++) {
        switch(s[i]) {
            case 'h':
                tmp = 3;
                break;
            case 'k':
                tmp = 2;
                break;
            case 'l':
                tmp = 1;
                break;
            case 'j':
                tmp = 0;
                break;
            default:
                return 0;
        }
        if (maze[x][y]&(1<<tmp)) {
            x += dirs[3-tmp][0];
            y += dirs[3-tmp][1];
        } else {
            return 0;
        }
        if (maze[x][y]&(1<<4)) {
            return 1;
        }
    }
    return 0;
}

int main() {
    char input[38] = {0};
    printf("iii3ZVW\nGive me your way: ");
    scanf("%38s", input);
    if (check(input)) {
        printf("You get it!~\n");
    } else {
        printf("Never gonna give you up~ (x\n");
    }
    return 0;
}